<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Olympic Earnings Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .usa-sticky { position: sticky; top: 0; z-index: 100; background: white; border-bottom: 4px solid #002868; }
        .spoiler-blur { filter: blur(6px); transition: 0.3s; }
        .spoiler-blur.off { filter: none; }
        .usa-row { background: #f0f7ff; border-left: 4px solid #bf0a30; font-weight: bold; }
        .money-text { color: #16a34a; font-family: monospace; }
        /* Hide scrollbar but keep scroll */
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-gray-50 text-slate-900 pb-20">

    <!-- STICKY HEADER: USA TOTAL DEBT/EARNINGS -->
    <header class="usa-sticky shadow-lg px-4 py-4">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div>
                <div class="bg-blue-900 text-white px-2 py-0.5 rounded text-[10px] font-black italic mb-1 w-fit">TEAM USA PAYOUTS</div>
                <div class="text-2xl font-black money-text" id="usa-total-cash">$0</div>
            </div>
            <div class="text-right">
                <span class="text-[10px] font-bold text-slate-400 uppercase block">Spoilers</span>
                <input type="checkbox" id="spoiler-toggle" class="w-10 h-5 mt-1">
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 space-y-8">
        
        <!-- DAILY EVENTS & USA CONTENTION -->
        <section>
            <h2 class="text-sm font-black uppercase mb-3 flex items-center gap-2">
                <span class="w-2 h-2 bg-red-600 rounded-full animate-pulse"></span>
                Medal Events & USA Watch
            </h2>
            <div id="event-list" class="space-y-3">
                <!-- Events injected here -->
            </div>
        </section>

        <!-- EARNINGS LEADERBOARD -->
        <section>
            <h2 class="text-sm font-black uppercase mb-3 text-slate-500">Athlete Earnings Leaderboard</h2>
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="max-h-[400px] overflow-y-auto">
                    <table class="w-full text-left text-xs">
                        <thead class="bg-slate-50 sticky top-0 border-b font-bold text-slate-500 uppercase">
                            <tr>
                                <th class="p-4">Athlete</th>
                                <th class="p-4">Medals</th>
                                <th class="p-4 text-right">Cash Est.</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body">
                            <!-- Rows injected here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

    </main>

    <script>
        /** 
         * DATA MANAGEMENT SECTION
         * Update this once a day. The code handles all the math.
         */
        const PAYOUT_RATES = {
            "USA": { g: 37500, s: 22500, b: 15000 },
            "ITA": { g: 212000, s: 106000, b: 71000 },
            "HKG": { g: 768000, s: 384000, b: 192000 },
            "NOR": { g: 0, s: 0, b: 0 }, // Norway famously pays $0
        };

        const olympicData = {
            athletes: [
                { name: "Nathan Chen", country: "USA", g: 1, s: 0, b: 0, perk: "" },
                { name: "Arianna Fontana", country: "ITA", g: 1, s: 1, b: 0, perk: "" },
                { name: "Chloe Kim", country: "USA", g: 1, s: 0, b: 0, perk: "" },
                { name: "Beat Feuz", country: "SUI", g: 1, s: 0, b: 0, perk: "Swiss Cow" },
            ],
            todayEvents: [
                { sport: "Figure Skating", event: "Men's Singles", winner: "Nathan Chen (USA)", usaInContention: true },
                { sport: "Short Track", event: "Women's 500m", winner: "Arianna Fontana (ITA)", usaInContention: false },
                { sport: "Alpine Skiing", event: "Men's Downhill", winner: "Beat Feuz (SUI)", usaInContention: true },
            ]
        };

        let showSpoilers = false;

        function calculateEarnings(athlete) {
            const rates = PAYOUT_RATES[athlete.country] || { g: 20000, s: 15000, b: 10000 }; // Default for unknown
            return (athlete.g * rates.g) + (athlete.s * rates.s) + (athlete.b * rates.b);
        }

        function render() {
            // 1. Calculate USA Total for Header
            const usaTotal = olympicData.athletes
                .filter(a => a.country === "USA")
                .reduce((sum, a) => sum + calculateEarnings(a), 0);
            document.getElementById('usa-total-cash').innerText = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(usaTotal);

            // 2. Render Events
            const eventList = document.getElementById('event-list');
            eventList.innerHTML = olympicData.todayEvents.map(e => `
                <div class="bg-white p-4 rounded-xl border-2 ${e.usaInContention ? 'border-blue-600' : 'border-slate-100'} flex justify-between items-center shadow-sm">
                    <div>
                        <div class="flex gap-2 mb-1">
                            <span class="text-[9px] font-bold uppercase bg-slate-100 px-1.5 py-0.5 rounded text-slate-500">${e.sport}</span>
                            ${e.usaInContention ? '<span class="text-[9px] font-bold italic bg-blue-600 text-white px-1.5 py-0.5 rounded tracking-tighter">USA IN CONTENTION</span>' : ''}
                        </div>
                        <h3 class="text-sm font-bold">${e.event}</h3>
                    </div>
                    <div class="text-right">
                        <span class="text-[9px] font-bold text-slate-300 uppercase block">Gold Winner</span>
                        <p class="text-xs font-black italic ${showSpoilers ? '' : 'spoiler-blur'}">${e.winner}</p>
                    </div>
                </div>
            `).join('');

            // 3. Render Leaderboard (Sorted by Cash)
            const sortedAthletes = [...olympicData.athletes].sort((a, b) => calculateEarnings(b) - calculateEarnings(a));
            const leaderboard = document.getElementById('leaderboard-body');
            leaderboard.innerHTML = sortedAthletes.map(a => `
                <tr class="${a.country === 'USA' ? 'usa-row' : 'border-b border-slate-50'}">
                    <td class="p-4">
                        <div class="font-bold">${a.name}</div>
                        <div class="text-[10px] text-slate-400 uppercase">${a.country} ${a.perk ? 'â€¢ '+a.perk : ''}</div>
                    </td>
                    <td class="p-4">
                        <div class="flex gap-1">
                            ${a.g > 0 ? `<span class="w-3 h-3 rounded-full bg-yellow-400"></span>` : ''}
                            ${a.s > 0 ? `<span class="w-3 h-3 rounded-full bg-slate-300"></span>` : ''}
                            ${a.b > 0 ? `<span class="w-3 h-3 rounded-full bg-orange-400"></span>` : ''}
                        </div>
                    </td>
                    <td class="p-4 text-right">
                        <div class="font-bold money-text ${showSpoilers ? '' : 'spoiler-blur'}">
                            $${calculateEarnings(a).toLocaleString()}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        document.getElementById('spoiler-toggle').addEventListener('change', (e) => {
            showSpoilers = e.target.checked;
            render();
        });

        render();
    </script>
</body>
</html>
